<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">

<html><head><title>ext3</title><link rel="stylesheet" type="text/css" href="../styles/main.css"><script language=JavaScript src="../javascript/main.js"></script><script language=JavaScript src="../javascript/searchdata.js"></script></head><body class="ContentPage" onLoad="NDOnLoad()"><script language=JavaScript><!--
if (browserType) {document.write("<div class=" + browserType + ">");if (browserVer) {document.write("<div class=" + browserVer + ">"); }}// --></script>

<!--  Generated by Natural Docs, version 1.4 -->
<!--  http://www.naturaldocs.org  -->

<!-- saved from url=(0026)http://www.naturaldocs.org -->




<div id=Content><div class="CFile"><div class=CTopic id=MainTopic><h1 class=CTitle><a name="ext3"></a>ext3</h1><div class=CBody><p>by august0815 01.12.2009</p><!--START_ND_SUMMARY--><div class=Summary><div class=STitle>Summary</div><div class=SBorder><table border=0 cellspacing=0 cellpadding=0 class=STable><tr class="SMain"><td class=SEntry><a href="#ext3" >ext3</a></td><td class=SDescription>by august0815 01.12.2009</td></tr><tr class="SGroup"><td class=SEntry><a href="#Functions" >Functions</a></td><td class=SDescription></td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#CONSTANT_TESTED_OK" >CONSTANT  TESTED_OK</a></td><td class=SDescription>CONSTANT</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#ALLOT(n--)TESTED_OK" >ALLOT ( n -- ) TESTED_OK</a></td><td class=SDescription>Allocate n bytes to the code dictionary.</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#CELLS(n--n);TESTED_OK" >CELLS  ( n -- n )  ; TESTED_OK</a></td><td class=SDescription>CELLS</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#VARIABLE(--;string)TESTED_OK" >VARIABLE  ( -- ; &lt;string&gt; ) TESTED_OK</a></td><td class=SDescription>Compile a new variable .</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#VALUE(--n)TESTED_OK" >VALUE   ( -- n ) TESTED_OK</a></td><td class=SDescription>VALUEs are like VARIABLEs but with a simpler syntax.</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#TOO(n--)TESTED_OK_remane=TO" >TOO     ( n -- ) TESTED_OK remane  =&gt; TO</a></td><td class=SDescription>VALUEs are like VARIABLEs but with a simpler syntax.</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#+TO_TESTED_OK" >+TO  TESTED_OK</a></td><td class=SDescription>( x +TO VAL adds x to VAL )</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#DEPTH(--n)TESTED_OK" >DEPTH   ( -- n ) TESTED_OK</a></td><td class=SDescription>( DEPTH returns the depth of the stack. </td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#CLSSTACK(x0.xn--)TESTED_OK" >CLSSTACK ( x0 .. xn -- ) TESTED_OK</a></td><td class=SDescription>CLSSTACK</td></tr></table></div></div><!--END_ND_SUMMARY--></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Functions"></a>Functions</h3></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="CONSTANT_TESTED_OK"></a>CONSTANT  TESTED_OK</h3><div class=CBody><p>CONSTANT</p><blockquote><pre>: CONSTANT
WORD        ( get the name (the name follows CONSTANT) )
CREATE      ( make the dictionary entry )
DOCOL ,     ( append DOCOL (the codeword field of this word) )
' LIT ,     ( append the codeword LIT )
,       ( append the value on the top of the stack )
' EXIT ,    ( append the codeword EXIT )</pre></blockquote></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="ALLOT(n--)TESTED_OK"></a>ALLOT ( n -- ) TESTED_OK</h3><div class=CBody><p>Allocate n bytes to the code dictionary.</p><blockquote><pre>First ALLOT, where n ALLOT allocates n bytes of memory.  (Note when calling this that
it's a very good idea to make sure that n is a multiple of 4, or at least that next time
a word is compiled that HERE has been left as a multiple of 4).
:ALLOT      ( n -- addr )
HERE @ SWAP ( here n )
HERE +!     ( adds n to HERE, after this the old value of HERE is still on the stack );</pre></blockquote></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="CELLS(n--n);TESTED_OK"></a>CELLS  ( n -- n )  ; TESTED_OK</h3><div class=CBody><p>CELLS</p><blockquote><pre>Second, CELLS.  In FORTH the phrase 'n CELLS ALLOT' means allocate n integers of whatever size
is the natural size for integers on this machine architecture.  On this 32 bit machine therefore
CELLS just multiplies the top of stack by 4.
: CELLS ( n -- n ) 4 *;</pre></blockquote></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="VARIABLE(--;string)TESTED_OK"></a>VARIABLE  ( -- ; &lt;string&gt; ) TESTED_OK</h3><div class=CBody><p>Compile a new variable .</p><blockquote><pre>So now we can define VARIABLE easily in much the same way as CONSTANT above.  Refer to the
diagram above to see what the word that this creates will look like.
: VARIABLE
1 CELLS ALLOT   ( allocate 1 cell of memory, push the pointer to this memory )
WORD CREATE ( make the dictionary entry (the name follows VARIABLE) )
DOCOL ,     ( append DOCOL (the codeword field of this word) )
' LIT ,     ( append the codeword LIT )
,       ( append the pointer to the new memory )
' EXIT ,    ( append the codeword EXIT )</pre></blockquote></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="VALUE(--n)TESTED_OK"></a>VALUE   ( -- n ) TESTED_OK</h3><div class=CBody><p>VALUEs are like VARIABLEs but with a simpler syntax.</p><blockquote><pre>20 VALUE VAL    creates VAL with initial value 20
VAL     pushes the value (20) directly on the stack
30 TO VAL   updates VAL, setting it to 30
VAL     pushes the value (30) directly on the stack
: VALUE     ( n -- )
WORD CREATE ( make the dictionary entry (the name follows VALUE) )
DOCOL ,     ( append DOCOL )
' LIT ,     ( append the codeword LIT )
,       ( append the initial value )
' EXIT ,    ( append the codeword EXIT )</pre></blockquote></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="TOO(n--)TESTED_OK_remane=TO"></a>TOO     ( n -- ) TESTED_OK remane  =&gt; TO</h3><div class=CBody><p>VALUEs are like VARIABLEs but with a simpler syntax.</p><blockquote><pre>: TO IMMEDIATE  ( n -- )
WORD        ( get the name of the value )
FIND        ( look it up in the dictionary )
&gt;DFA        ( get a pointer to the first data field (the 'LIT') )
4+      ( increment to point at the value )
STATE @ IF  ( compiling? )
    ' LIT ,     ( compile LIT )
    ,       ( compile the address of the value )
    ' ! ,       ( compile ! )
ELSE        ( immediate mode )
    !       ( update it straightaway )
THEN</pre></blockquote></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="+TO_TESTED_OK"></a>+TO  TESTED_OK</h3><div class=CBody><p>( x +TO VAL adds x to VAL )</p><blockquote><pre>: +TO IMMEDIATE
WORD        ( get the name of the value )
FIND        ( look it up in the dictionary )
&gt;DFA        ( get a pointer to the first data field (the 'LIT') )
4+      ( increment to point at the value )
STATE @ IF  ( compiling? )
    ' LIT ,     ( compile LIT )
    ,       ( compile the address of the value )
    ' +! ,      ( compile +! )
ELSE        ( immediate mode )
    +!      ( update it straightaway )
THEN</pre></blockquote></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="DEPTH(--n)TESTED_OK"></a>DEPTH   ( -- n ) TESTED_OK</h3><div class=CBody><p>( DEPTH returns the depth of the stack.&nbsp; )</p><blockquote><pre>: DEPTH      ( -- n )
S0 @ DSP@ -
4-           ( adjust because S0 was on the stack when we pushed DSP )</pre></blockquote></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="CLSSTACK(x0.xn--)TESTED_OK"></a>CLSSTACK ( x0 .. xn -- ) TESTED_OK</h3><div class=CBody><p>CLSSTACK</p><blockquote><pre>: cls  ( x0 .. xn -- ) \ clear stack
depth 0= IF ( noop) ELSE  depth 0 do drop loop THEN ;
DEPTH IF  .S  DEPTH 0 DO DROP LOOP  THEN</pre></blockquote></div></div></div>

</div><!--Content-->


<div id=Footer><a href="http://www.naturaldocs.org">Generated by Natural Docs</a></div><!--Footer-->


<div id=Menu><div class=MEntry><div class=MFile><a href="ext-s.html">ext</a></div></div><div class=MEntry><div class=MFile><a href="ext1-s.html">ext1</a></div></div><div class=MEntry><div class=MFile><a href="ext2-s.html">ext2</a></div></div><div class=MEntry><div class=MFile id=MSelected>ext3</div></div><div class=MEntry><div class=MFile><a href="forth_core-s.html">forth_core</a></div></div><div class=MEntry><div class=MFile><a href="forth_macros-s.html">forth_macros</a></div></div><div class=MEntry><div class=MFile><a href="forth_words-s.html">forth_words</a></div></div><div class=MEntry><div class=MFile><a href="kernel-s.html">kernel</a></div></div><div class=MEntry><div class=MFile><a href="kernel_video-s.html">kernel_video</a></div></div><div class=MEntry><div class=MFile><a href="LICENSE-txt.html">License</a></div></div><div class=MEntry><div class=MFile><a href="rest-s.html">rest</a></div></div><div class=MEntry><div class=MFile><a href="boot-s.html">Starting point of OS</a></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent1')">Index</a><div class=MGroupContent id=MGroupContent1><div class=MEntry><div class=MIndex><a href="../index/General.html">Everything</a></div></div><div class=MEntry><div class=MIndex><a href="../index/Constants.html">Constants</a></div></div><div class=MEntry><div class=MIndex><a href="../index/Files.html">Files</a></div></div><div class=MEntry><div class=MIndex><a href="../index/Functions.html">Functions</a></div></div><div class=MEntry><div class=MIndex><a href="../index/Macros.html">Macros</a></div></div><div class=MEntry><div class=MIndex><a href="../index/Variables.html">Variables</a></div></div></div></div></div><script type="text/javascript"><!--
var searchPanel = new SearchPanel("searchPanel", "HTML", "../search");
--></script><div id=MSearchPanel class=MSearchPanelInactive><input type=text id=MSearchField value=Search onFocus="searchPanel.OnSearchFieldFocus(true)" onBlur="searchPanel.OnSearchFieldFocus(false)" onKeyUp="searchPanel.OnSearchFieldChange()"><select id=MSearchType onFocus="searchPanel.OnSearchTypeFocus(true)" onBlur="searchPanel.OnSearchTypeFocus(false)" onChange="searchPanel.OnSearchTypeChange()"><option  id=MSearchEverything selected value="General">Everything</option><option value="Constants">Constants</option><option value="Files">Files</option><option value="Functions">Functions</option><option value="Macros">Macros</option><option value="Variables">Variables</option></select></div></div><!--Menu-->



<!--START_ND_TOOLTIPS-->
<!--END_ND_TOOLTIPS-->




<div id=MSearchResultsWindow><iframe src="" frameborder=0 name=MSearchResults id=MSearchResults></iframe><a href="javascript:searchPanel.CloseResultsWindow()" id=MSearchResultsWindowClose>Close</a></div>


<script language=JavaScript><!--
if (browserType) {if (browserVer) {document.write("</div>"); }document.write("</div>");}// --></script></body></html>